# Connecting Real Data (Cloudflare KV)
Currently, the application is running in **Mock Mode**. This means leaderboards and user profiles are stored in memory or simulated, and will not persist across deployments or be shared between users.
To enable real, persistent global leaderboards, you need to provision a Cloudflare KV namespace and connect it to your Worker.
## Prerequisites
- [Cloudflare Account](https://dash.cloudflare.com/sign-up)
- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/install-and-update/) installed (included in project devDependencies)
## Step-by-Step Guide
### 1. Login to Cloudflare
In your terminal, run:
```bash
npx wrangler login
```
Follow the browser prompts to authorize Wrangler.
### 2. Create a KV Namespace
Create a namespace for the production environment:
```bash
npx wrangler kv:namespace create LEADERBOARD_KV
```
This command will output a configuration block that looks like this:
```toml
[[kv_namespaces]]
binding = "LEADERBOARD_KV"
id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
```
### 3. Update Configuration
Open `wrangler.jsonc` in the root of your project.
Add the KV namespace configuration to the file. It should look something like this:
```jsonc
{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "duck-dodger-xw77qd7w",
  "main": "worker/index.ts",
  "compatibility_date": "2025-04-24",
  "assets": {
    "not_found_handling": "single-page-application",
    "run_worker_first": ["/api/*", "!/api/docs/*"]
  },
  "observability": {
    "enabled": true
  },
  // Add this block with YOUR specific ID from step 2
  "kv_namespaces": [
    {
      "binding": "LEADERBOARD_KV",
      "id": "YOUR_GENERATED_ID_HERE"
    }
  ]
}
```
### 4. Deploy
Deploy the application with the new configuration:
```bash
bun run deploy
```
### 5. Verify
Refresh the application. Open the **Info Hub** (Book icon).
The status should now read **Storage: Cloudflare KV**.
## Troubleshooting
- **Status still says Mock?**
  - Ensure you deployed *after* updating `wrangler.jsonc`.
  - Check that the `id` in `wrangler.jsonc` matches the one generated by the create command.
  - If running locally (`bun run dev`), KV is simulated by Wrangler/Miniflare automatically, but you might need to restart the dev server.